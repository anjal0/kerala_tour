!function i(c,s,a){function u(t,e){if(!s[t]){if(!c[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};c[t][0].call(r.exports,function(e){return u(c[t][1][e]||e)},r,r.exports,i,c,s,a)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){"use strict";n.forInstance=function(t){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=2<arguments.length?arguments[2]:void 0;try{e.forEach(function(e){var t,n,o=window.document.querySelector(e);o&&(t=o,n=i,r.forEach(function(e){t.addEventListener(e,n)}))})}catch(e){t.isDebugMode&&console.error(e)}}}},{}],2:[function(e,t,n){"use strict";n.forInstance=function(t){return{getDataDependency:function(e){return t.LIB.LODASH.get(window._CTZG,["bootloader",e],null)},isBootloaderLoaded:function(){return Boolean(t.LIB.LODASH.get(window._CTZG,"bootloader",!1))}}}},{}],3:[function(e,t,n){"use strict";n.forInstance=function(o){return function(e){var t=o.LIB.COOKIE;if(/(&|\?)CTZ_Validator=(0|false)(&|$)/.test(window.location.href)||/CTI_FORCE_PLUGINS=(?!.*2017-05-CTZValidator\.cti1)/.test(document.cookie))t.remove("CTI_FORCE_PLUGINS"),t.remove("CTZ_Validator");else{var n=window.document.createElement("script");n.type="text/javascript",n.async=!1,n.charset="UTF-8",n.src=e?"https://localhost:8089/release/public/lib/sdk-full-v1.js":"https://static.clicktripz.com/r/lib/sdk-full-v1.js",n.onload=function(){window.CTI_FORCE_PLUGINS="2017-05-CTZValidator.cti1",window._CTZ_LIB_SDK_FULL_1(function(e,t,n){})},window.document.getElementsByTagName("head")[0].appendChild(n)}}}},{}],4:[function(e,t,n){"use strict";n.forInstance=function(t){return function(e){t.HELPERS.bootloaderV2adapter.isBootloaderLoaded()?t.LIB.constrain.UCB.ensureConstrains({config:t.config},e):t.LIB.consent.ensureUserConsent()?t.LIB.constrain.UCB.ensureConstrains({config:t.config},e):e(!1)}}},{}],5:[function(e,t,n){"use strict";n.forInstance=function(e){return function(e){return e=e.split("\n"),/^[^:]+: .*$/.test(e[0])&&e.shift(),e.slice(0,4)}}},{}],6:[function(e,t,n){"use strict";n.forInstance=function(e){return function(){return window.document.querySelector("script[src*='//static.clicktripz.com/r/ucb.js']")||window.document.querySelector("script[src*='//compare-static'][src*='/r/ucb.js']")||window.document.querySelector("script[src*='//localhost:8089/r/ucb.src.js']")||window.document.querySelector("script[src*='//localhost:8089/r/ucb.js']")||window.document.querySelector("script[src*='//sn1.clicktripz.com'][src*='/r/ucb/_stage/']")||window.document.querySelector("script[src*='//static.clicktripz.com/custom/'][src*='cti_'][src*='.js']")||window.document.querySelector("script[src*='//compare-static'][src*='.com/custom/'][src*='cti_'][src*='.js']")||window.document.querySelector("script[src*='dev.clicktripz.com']")||window.document.querySelector("script[src*='//static.clicktripz.com/tag.js']")||window.document.querySelector("script[src*='//compare-static'][src*='/tag.js']")||window.document.querySelector("script[src*='//localhost:8089/tag.js']")}}},{}],7:[function(e,t,n){"use strict";n.forInstance=function(i){return function(e,t){try{return t[{domain:function(e){return n(e,o)},page:function(e){return n(e,r)}}[e](t)]}catch(e){return i.isDebugMode&&console.error(e),null}function n(e,t){return Object.keys(e).filter(t)[0]}function o(e){var t=window.location.hostname;return new RegExp(e).test(t)}function r(e){var t=window.location.hostname+window.location.pathname+window.location.search;return new RegExp(e).test(t)}}}},{}],8:[function(e,t,n){"use strict";n.forInstance=function(o){return function(t){if(o.HELPERS.bootloaderV2adapter.isBootloaderLoaded()){var e=o.HELPERS.bootloaderV2adapter.getDataDependency("icc");if(e)return void t({protocol:"1",body:e})}var n={protocol:"1",body:null};o.LIB.http.request("POST",{url:"".concat(o.config["#cti1"].endpoints.www.hostUri,"/n2/c/v0/a/").concat(o.config["#cti1"].publisher.alias),responseType:"json",payload:JSON.stringify({ClientContext:{userAgent:o.LIB.dom.window.navigator.userAgent,locationPath:o.LIB.dom.window.location.pathname,locationSearch:o.LIB.dom.window.location.search,documentCookie:o.LIB.dom.window.document.cookie},protocol:n.protocol})},function(e){n.body=o.LIB.LODASH.merge({},e),t(n)})}}},{}],9:[function(e,t,n){"use strict";n.forInstance=function(e){return function(e){var t=e.split("/")[2];return t&&/(compare)/.test(t)?t:"static.clicktripz.com"}}},{}],10:[function(e,t,n){"use strict";n.forInstance=function(c){return{request:function(e,t,n,o){try{var r=new(window.XMLHttpRequest||window.ActiveXObject)("MSXML2.XMLHTTP.3.0");if(r.withCredentials=t.withCredentials,r.onload=function(){try{if(n){var e=r.response;"json"===t.responseType&&(e=window.JSON.parse(e)),n(e)}}catch(e){c.isDebugMode&&console.error(e)}},r.open(e,t.url,1),r.onreadystatechange=function(e){if(4===r.readyState&&200!==r.status)try{o&&o()}catch(e){c.isDebugMode&&console.error(e)}},t.headers)for(var i in t.headers)r.setRequestHeader(i,t.headers[i]);r.send(t.payload)}catch(e){c.isDebugMode&&console.error(e)}}}}},{}],11:[function(t,e,n){"use strict";n.forInstance=function(e){return{addEventListeners:t("./addEventListeners").forInstance(e),ensurePermission:t("./ensurePermission").forInstance(e),formatErrorStack:t("./formatErrorStack").forInstance(e),getBootloaderScript:t("./getBootloaderScript").forInstance(e),getInfo:t("./getInfo").forInstance(e),getIntegrationClientConfig:t("./getIntegrationClientConfig").forInstance(e),getStaticHostname:t("./getStaticHostname").forInstance(e),http:t("./http").forInstance(e),isObject:t("./isObject").forInstance(e),lib:t("./lib").forInstance(e),loadBundle:t("./loadBundle").forInstance(e),removeEventListeners:t("./removeEventListeners").forInstance(e),runBootloader:t("./runBootloader").forInstance(e),ctzValidator:t("./ctzValidator").forInstance(e),UserAgent:t("./userAgent"),bootloaderV2adapter:t("./bootloaderV2adapter").forInstance(e)}}},{"./addEventListeners":1,"./bootloaderV2adapter":2,"./ctzValidator":3,"./ensurePermission":4,"./formatErrorStack":5,"./getBootloaderScript":6,"./getInfo":7,"./getIntegrationClientConfig":8,"./getStaticHostname":9,"./http":10,"./isObject":12,"./lib":13,"./loadBundle":14,"./removeEventListeners":15,"./runBootloader":16,"./userAgent":17}],12:[function(e,t,n){"use strict";n.forInstance=function(e){return function(e){return"[object Object]"===Object.prototype.toString.call(e)}}},{}],13:[function(u,e,t){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.forInstance=function(a){return function(){var c={LODASH:{get:function(e,t,n){try{var o=null==e?void 0:function(e,t){t=function(e,t){if(Array.isArray(e))return e;return function(e,t){if(Array.isArray(e))return!1;var n=l(e);return"number"==n||"boolean"==n||null==e||(/^\w*$/.test(e)||!/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/.test(e)||null!=t&&e in Object(t))}(e,t)?[e]:function(e){var t=".".charCodeAt(0),i=/\\(\\)?/g,n=RegExp("[^.[\\]]+|\\[(?:([^\"'].*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),c=[];e.charCodeAt(0)===t&&c.push("");return e.replace(n,function(e,t,n,o){var r=e;n?r=o.replace(i,"$1"):t&&(r=t.trim()),c.push(r)}),c}(e)}(t,e);var n=0,o=t.length;for(;null!=e&&n<o;)e=e[s(t[n++])];return n&&n==o?e:void 0}(e,t);return void 0===o?n:o}catch(e){a.isDebugMode&&console.error(e)}},some:function(e,t){try{for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}catch(e){a.isDebugMode&&console.error(e)}},assign:window.Object.assign||function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),o=1;o<arguments.length;o++){var r=arguments[o];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},merge:function(e){for(var t,n=arguments.length,o=new Array(1<n?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];var i=o.reduce(function(e,t){return e.push(JSON.parse(JSON.stringify(t))),e},[]);return(t=c.LODASH).assign.apply(t,[e].concat(f(i)))}},dom:{window:window},_sdkStreamName:"bootloader",EventEmitter:u("events").EventEmitter,JSON:window.JSON,http:a.HELPERS.http,UA:new a.HELPERS.UserAgent(window.navigator.userAgent),config:{}};c.COOKIE=u("/Users/nickvrdoljak/Documents/cti.integrations/legacy/integrations/lib/cti/lib/cookie.js").forLib(c);var e=a.HELPERS.getBootloaderScript(a),t=a.HELPERS.getStaticHostname(e.src),n=/compare-static/.test(t)?t.replace("compare-static","compare"):"www.clicktripz.com",o=e.getAttribute("data-alias")||null,r=e.getAttribute("data-publisher")||null,i=c.COOKIE.get("CTI_FORCE_DEBUG");return c._bootOptions={"#build1":{debugEnabled:i||!1,vendorAlias:o,vendorHash:r,staticHostname:t}},-1<n.indexOf("compare")&&(c._bootOptions["#constrain1"]={specs:[{fpcs:[{hostnames:{www:n,static:t,beacon:n}}]}]}),c.CONSTRAIN_ADAPTER=u("/Users/nickvrdoljak/Documents/cti.integrations/legacy/integrations/lib/cti.sdk/sdk/constrain-adapter.js").forLIB(c),(a.LIB=c).consent=u("/Users/nickvrdoljak/Documents/cti.integrations/legacy/integrations/lib/cti.sdk/lib/functions/consent.js").forSDK(a),c.constrain=u("/Users/nickvrdoljak/Documents/cti.integrations/legacy/integrations/lib/cti.sdk/lib/functions/constrain.js").forSDK(a),c;function s(e){if("string"==typeof e)return e;var t="".concat(e);return"0"==t&&1/e==-INFINITY?"-0":t}}}},{"/Users/nickvrdoljak/Documents/cti.integrations/legacy/integrations/lib/cti.sdk/lib/functions/consent.js":20,"/Users/nickvrdoljak/Documents/cti.integrations/legacy/integrations/lib/cti.sdk/lib/functions/constrain.js":21,"/Users/nickvrdoljak/Documents/cti.integrations/legacy/integrations/lib/cti.sdk/sdk/constrain-adapter.js":22,"/Users/nickvrdoljak/Documents/cti.integrations/legacy/integrations/lib/cti/lib/cookie.js":23,events:18}],14:[function(e,t,n){"use strict";n.forInstance=function(o){return function(e){try{var t=window.document.getElementsByTagName("body")[0]||window.document.getElementsByTagName("head")[0],n=window.document.createElement("script");n.type="text/javascript",n.src=e,n.setAttribute("async",""),n.setAttribute("charset","UTF-8"),t.appendChild(n)}catch(e){o.isDebugMode&&console.error(e)}}}},{}],15:[function(e,t,n){"use strict";n.forInstance=function(t){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=2<arguments.length?arguments[2]:void 0;try{e.forEach(function(e){var t,n,o=window.document.querySelector(e);o&&(t=o,n=i,r.forEach(function(e){t.removeEventListener(e,n)}))})}catch(e){t.isDebugMode&&console.error(e)}}}},{}],16:[function(e,t,n){"use strict";function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.forInstance=function(m){var b=window.location.href,w=null;return function e(t){try{var n,o=m.HELPERS.getInfo("domain",t.domainMap),r=!!o;if(t.audienceBlock){var i=m.HELPERS.bootloaderV2adapter.getDataDependency("constrain"),c=m.LIB.LODASH.get(i,"data.audiences",{}),s=!(!(c.typeOne||[]).length&&!(c.typeTwo||[]).length),a=function(){var e=m.LIB.LODASH.get(i,"data.products",{});for(var t in e)if(!e[t].suppress)return!0;return!1}();if(!s&&!a)return void(m.isDebugMode&&console.log("Disabling - user has no audiences or unsuppressed products"))}if(r)if((n=m.HELPERS.getInfo("page",o.pageMap))&&n&&n.enabled){if("object"===v(n.bundleURL)){var u=Object.keys(n.bundleURL);if(1!=u.length)throw new Error("UCB supports a single object path!");var l,f=u[0];if("ctExperiment"===f){var d=n.bundleURL[f].treatmentWeight;(!/ctForceControl=1/.test(window.location.search)&&window.Math.random()<d||/ctForceTreatment=1/.test(window.location.search))&&(l="treatment")}else l=m.LIB.LODASH.get(window,f,null);var p=n.bundleURL[f];n.bundleURL=p[l]||p.ELSE}if(/ctBundleURL=[^&]+/.test(window.location.search)&&(n.bundleURL=window.decodeURIComponent(window.location.search.match(/ctBundleURL=([^&]+)/)[1])),!n.bundleURL)throw new Error("bundleURL is undefined!");n.loadIntegrationImmediately?(clearInterval(w),m.HELPERS.loadBundle(n.bundleURL)):"complete"===window.document.readyState?h(n):window.addEventListener("load",h.bind(null,n))}else g();else g()}catch(e){m.isDebugMode&&console.error(e)}function g(){w=w||setInterval(function(){window.location.href!==b&&(b=window.location.href,e(t))},1e3)}function h(e){var t=!1;m.HELPERS.addEventListeners(e.elements,e.interactionEvents,n);try{window.setTimeout(n,e.ms||0),window.removeEventListener("load",h)}catch(e){m.isDebugMode&&console.error(e)}function n(){clearInterval(w);try{t||(t=!0,m.HELPERS.loadBundle(e.bundleURL),m.HELPERS.removeEventListeners(e.elements,e.interactionEvents,n))}catch(e){m.isDebugMode&&console.error(e)}}}}}},{}],17:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this.agentString=e}var e,n,o;return e=t,(n=[{key:"getLanguage",value:function(){var e=window.navigator.languages?window.navigator.languages[0]:null;return-1!==(e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage).indexOf("-")&&(e=e.split("-")[0]),-1!==e.indexOf("_")&&(e=e.split("_")[0]),e||"??"}},{key:"isAndroidTablet",value:function(){return/Android/i.test(this.agentString)&&!/Mobile/i.test(this.agentString)}},{key:"isDesktopOrTablet",value:function(){return!(this.isMobileDevice()&&!this.isIpad()&&!this.isAndroidTablet())}},{key:"isIpad",value:function(){return/iPad/i.test(this.agentString)}},{key:"isMobileDevice",value:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB10|IEMobile|Opera Mini/i.test(this.agentString)}}])&&r(e.prototype,n),o&&r(e,o),t}();t.exports=o},{}],18:[function(e,t,n){var a=Object.create||function(e){function t(){}return t.prototype=e,new t},c=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},i=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function o(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=a(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=o).EventEmitter=o).prototype._events=void 0,o.prototype._maxListeners=void 0;var r,s=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),r=0===u.x}catch(e){r=!1}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function f(e,t,n,o){var r,i,c;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),c=i[t]):(i=e._events=a(null),e._eventsCount=0),c){if("function"==typeof c?c=i[t]=o?[n,c]:[c,n]:o?c.unshift(n):c.push(n),!c.warned&&(r=l(e))&&0<r&&c.length>r){c.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+c.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=c.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else c=i[t]=n,++e._eventsCount;return e}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=i.call(d,o);return r.listener=n,o.wrapFn=r}function g(e,t,n){var o=e._events;if(!o)return[];var r=o[t];return r?"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):m(r,r.length):[]}function h(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}r?Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');s=e}}):o.defaultMaxListeners=s,o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e,t,n,o){var r,i,c,s,a,u,l="error"===e;if(u=this._events)l=l&&null==u.error;else if(!l)return!1;if(l){if(1<arguments.length&&(r=t),r instanceof Error)throw r;var f=new Error('Unhandled "error" event. ('+r+")");throw f.context=r,f}if(!(i=u[e]))return!1;var d="function"==typeof i;switch(c=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var o=e.length,r=m(e,o),i=0;i<o;++i)r[i].call(n)}(i,d,this);break;case 2:!function(e,t,n,o){if(t)e.call(n,o);else for(var r=e.length,i=m(e,r),c=0;c<r;++c)i[c].call(n,o)}(i,d,this,t);break;case 3:!function(e,t,n,o,r){if(t)e.call(n,o,r);else for(var i=e.length,c=m(e,i),s=0;s<i;++s)c[s].call(n,o,r)}(i,d,this,t,n);break;case 4:!function(e,t,n,o,r,i){if(t)e.call(n,o,r,i);else for(var c=e.length,s=m(e,c),a=0;a<c;++a)s[a].call(n,o,r,i)}(i,d,this,t,n,o);break;default:for(s=new Array(c-1),a=1;a<c;a++)s[a-1]=arguments[a];!function(e,t,n,o){if(t)e.apply(n,o);else for(var r=e.length,i=m(e,r),c=0;c<r;++c)i[c].apply(n,o)}(i,d,this,s)}return!0},o.prototype.on=o.prototype.addListener=function(e,t){return f(this,e,t,!1)},o.prototype.prependListener=function(e,t){return f(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,o,r,i,c;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(n=o[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=a(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){c=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(e,t){for(var n=t,o=n+1,r=e.length;o<r;n+=1,o+=1)e[n]=e[o];e.pop()}(n,r),1===n.length&&(o[e]=n[0]),o.removeListener&&this.emit("removeListener",e,c||t)}return this},o.prototype.removeAllListeners=function(e){var t,n,o;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=a(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=a(null):delete n[e]),this;if(0===arguments.length){var r,i=c(n);for(o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=a(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},o.prototype.listeners=function(e){return g(this,e,!0)},o.prototype.rawListeners=function(e){return g(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],19:[function(f,e,t){"use strict";function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}!function(i){if(i._CTZG&&i._CTZG.UCB)return;var e,c;try{e=f("/Users/nickvrdoljak/Documents/cti.integrations/legacy/integrations/lib/cti/lib/cookie.js").forLib({dom:{window:i}}),c=e.get("CTI_FORCE_DEBUG")}catch(e){}if(Boolean(i._CTZG&&i._CTZG.bootloader)){var t,n,o;try{var r=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=this;t.name="UCB",t.isDebugMode=e,t.HELPERS=f("./helpers").forInstance(t),t.LIB=t.HELPERS.lib(),t.config=t.LIB.config}var e,t,n;return e=r,n=[{key:"run",value:function(){try{var e=new r(c)}catch(e){if(c)return console.error("Error Instantiating UCB",e),null}try{e.boot()}catch(e){if(c)return console.error("Error booting UCB",e),null}}},{key:"downgradeICCResponseFormat",value:function(t){var n={PageViewTracker:"helper/PageviewTracker",InsertPlacement:"helper/InsertPlacement",PlacementContainer:"helper/PlacementContainer",InsertPlacementAsync:"helper/InsertPlacementAsync",Config:"cti1/config",PubExit:"cti1/pub-exit",RecordSession:"cti1/record-session",ValidateCity:"cti1/validate-city",RolloutPA:"cti1/rollout-pa",Experiments:"cti1/experiments",Creatives:"cti1/creatives",Campaigns:"cti1/campaigns",Products:"cti1/products",GateUtil:"cti1/gate-util",PageMap:"cti1/page-map",PubTargeting:"cti1/pub-targeting",SessionTracking:"cti1/session-tracking",CTI1LIB:"cti1/cti1lib",PageType:"cti1/page-type",Watcher:"cti1/watcher",Geolocate:"cti1/geolocate",ResultPopunder:"cti1/result-popunder",ForcedDates:"cti1/forced-dates",QueryFirewall:"cti1/query-firewall",QueryFirewall2:"cti1/query-firewall2"};return t.UCB.plugins={},Object.keys(t).forEach(function(e){"UCB"!==e&&(t.UCB.plugins[e]=t[e])}),Object.keys(t.UCB.plugins).forEach(function(e){t.UCB.plugins[e]["@type"]=n[t.UCB.plugins[e]["@type"]],delete t.UCB.plugins[e].runFor,delete t.UCB.plugins[e]["@source"]}),delete t.UCB["@type"],delete t.UCB.runFor,delete t.UCB["@source"],0===Object.keys(t.UCB.plugins).length&&delete t.UCB.plugins,t.UCB}}],(t=[{key:"boot",value:function(){var o=this;o.HELPERS.ensurePermission(function(e){e&&(i._CTZG.adblockIsEnabled=o.HELPERS.bootloaderV2adapter.getDataDependency("adblockIsEnabled"),o.HELPERS.getIntegrationClientConfig(function(e){if("1"===e.protocol){i._CTZG.integrationClientConfig=i.JSON.parse(i.JSON.stringify(e.body));try{e.body=r.downgradeICCResponseFormat(e.body)}catch(e){c&&console.error("Error downgrading icc v1 response format",e)}}var t=i.JSON.parse(i.JSON.stringify(e.body));t.adblockIsEnabled=o.HELPERS.bootloaderV2adapter.getDataDependency("adblockIsEnabled"),i._CTZG.UCB.getConstrain=function(){return t};var n={};n="1"===e.protocol?i._CTZG.integrationClientConfig.UCB:i._CTZG.UCB.getConstrain(),o.LIB.LODASH.get(n,"assessment",!1)?i.CTI_FORCE_PLUGINS=function(e){document.cookie="CTI_FORCE_PLUGINS="+e,i.location.reload()}:o.HELPERS.runBootloader(n),(/(&|\?)CTZ_Validator=(1|true)(&|$)/.test(i.location.href)||/(^|;\s?)CTI_FORCE_PLUGINS=2017-05-CTZValidator.cti1(;\s?|$)/.test(document.cookie))&&o.HELPERS.ctzValidator(c)}))})}}])&&d(e.prototype,t),n&&d(e,n),r}();i._CTZG=i._CTZG||{},i._CTZG.adblockIsEnabled=!1,i._CTZG.UCB={version:"0.0.9",publisherAlias:"%RT_VENDOR_ALIAS%"},r.run()}catch(e){return}}else{var s=[i.document.querySelectorAll("script[src*='//static.clicktripz.com/r/ucb.js']"),i.document.querySelectorAll("script[src*='//compare-static'][src*='/ucb.js']"),i.document.querySelectorAll("script[src*='//localhost:8088/r/ucb.js']"),i.document.querySelectorAll("script[src*='//localhost:8089/r/ucb.js']"),i.document.querySelectorAll("script[src*='//localhost:8089/r/ucb.src.js']")].reduce(function(e,t){if(t.length<1)return e;for(var n=[],o=0;o<t.length;o++)(t[o].getAttribute("data-alias")||t[o].getAttribute("data-publisher"))&&n.push(t[o]);return n.length<1||e.push(n[0]),e},[])[0];if(s){var a=(n=(t=s).src.match(/compare-static\.[a-z0-9]*\.com/),{hostName:o=n?n[0]:"static.clicktripz.com",publisherAlias:t.getAttribute("data-alias")||null,publisherHash:t.getAttribute("data-publisher")||null,fpcsEnabled:!/clicktripz\.com/.test(o)}),u="https://"+a.hostName+"/tag.js",l=document.createElement("SCRIPT");return l.setAttribute("data-alias",a.publisherAlias||""),l.setAttribute("data-publisher",a.publisherHash||""),l.src=u,document.querySelector("body").appendChild(l)}c&&console.error("No ucb tag found on page.")}}(window)},{"./helpers":11,"/Users/nickvrdoljak/Documents/cti.integrations/legacy/integrations/lib/cti/lib/cookie.js":23}],20:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.forSDK=function(o){return{ensureUserConsent:function(e){var t=o.LIB.LODASH.get(e,"config.#cti1.options.consent",null)||o.LIB.LODASH.get(window,"_CTZ.consent",null)||o.LIB.LODASH.get(window,"_CTZS.consent",null),n=!0;return t?t.hasOwnProperty("allowed")?(n=function(e){switch(r(e)){case"string":return{true:!0,false:!1}[e];case"boolean":default:return e}}(t.allowed),o.LIB.logger.debug("[CTZ-consent] :: allowed boolean :: user consent is ".concat(n))):(o.LIB.logger.debug("[CTZ-consent] :: consent object present, but missing properties consentString and allowed :: defaulting to false"),n=!1):o.LIB.logger.debug("[CTZ-consent] :: consent object not present :: defaulting to true"),n}}}},{}],21:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.forSDK=function(f){var s=f.LIB.COOKIE.get("_ctpuid"),d=!1,p=!1;return{UCB:{ensureConstrains:function(t,n){if(f.HELPERS.bootloaderV2adapter.isBootloaderLoaded()&&f.HELPERS.bootloaderV2adapter.getDataDependency("constrain"))return void n(!0);var e=f.config["#cti1"].endpoints.www.hostUri.replace(/^\/\//,""),o=f.LIB.LODASH.get(t,"config.#cti1.publisher.alias",null),r=f.LIB.LODASH.get(t,"config.#cti1.publisher.hash",null);if(!/clicktripz\.com/.test(e)){var i="".concat(f.config["#cti1"].endpoints.www.protocol,"//www.clicktripz.com/api/integrations/v1/constrain");a(i,function(){f.config["#cti1"].adblockIsEnabled=!1,a(i=h(o,r,e,f.config["#cti1"].adblockIsEnabled),function(e){m(e,t,c)})},function(){f.config["#cti1"].adblockIsEnabled=!0,a(i=h(o,r,e,f.config["#cti1"].adblockIsEnabled),function(e){m(e,t,c)})})}else{a(g(o,r,e),function(e){m(e,t,c)})}function c(e){!1===f.LIB.LODASH.get(f.config["#cti1"],"userOptedOut",!1)?(!0===p&&f.LIB.logger.error("Publisher alias is not set in config['#cti1'].publisher.alias"),n(!0)):n(!1)}}},INTEGRATION:{ensureConstrains:function(i){var t=(new Date).getTime(),n=f.LIB.LODASH.get(i,"config.#cti1.options.FPCSCookieSyncLogLoaded",!1),c=f.config["#cti1"].endpoints.www.hostUri.replace(/^\/\//,""),s=f.LIB.LODASH.get(i,"config.#cti1.publisher.alias",null),a=f.LIB.LODASH.get(i,"config.#cti1.publisher.hash",null),u=!/clicktripz\.com/.test(c);return new f.LIB.Promise(function(n,o){var e=f.LIB.LODASH.get(window,"_CTZG.bootloader.constrain",null);if(e){f.LIB.CONSTRAIN_ADAPTER.applyConstrainResponse(i,e);var t=l(e);if(t)return n(t)}if(f.LIB.logger.error("[Integration SDK] ensureConstrain() Error :: raw constrain response not found on window"),u)f.LIB.endpoint.call({method:"GET",url:"".concat(f.config["#cti1"].endpoints.www.protocol,"//www.clicktripz.com/api/integrations/v1/constrain")}).then(function(){return!1}).catch(function(){return!0}).then(function(e){var t=h(s,a,c,e);return f.LIB.endpoint.call({method:"GET",url:t}).then(function(e){m(e,i,function(e){var t=l(e);if(t)return n(t)})}).catch(function(e){o(e)})});else{var r=g(s,a,c);f.LIB.endpoint.call({method:"GET",url:r}).then(function(e){m(e,i,function(e){var t=l(e);if(t)return n(t)})}).catch(function(e){o(e)})}});function l(e){if(!1===f.LIB.LODASH.get(i.config["#cti1"],"userOptedOut",!1))return!0===p&&f.LIB.logger.error("Publisher alias is not set in config['#cti1'].publisher.alias"),{useFPCSCookieSync:d,constrainLoadStart:t,constrainLogLoaded:n,response:e}}}}};function g(e,t,n){var o="",r=encodeURIComponent(f.LIB.dom.window.location.href);return o=f.config["#cti1"].endpoints.www.protocol+"//"+n+"/api/integrations/v1/constrain?",null!==e?o+="publisherAlias="+e:null!==t?o+="h="+t:p=!0,void 0!==s&&(o+="&cpid=".concat(s)),o+="&u=".concat(r)}function h(e,t,n,o){var r="",i=encodeURIComponent(f.LIB.dom.window.location.href);if(o)r="".concat(f.config["#cti1"].endpoints.www.protocol,"//").concat(n,"/api/integrations/v1/constrain?"),null!==e?r+="publisherAlias=".concat(e):null!==t?r+="h=".concat(t):p=!0,void 0!==s&&(r+="&cpid=".concat(s)),r+="&u=".concat(i);else{d=!0;var c="".concat(f.config["#cti1"].endpoints.www.protocol,"//").concat(n,"/api/integrations/v1/constrain?");r="".concat(f.config["#cti1"].endpoints.www.protocol,"//www.clicktripz.com/api/integrations/v1/constrain?"),null!==e?(c+="publisherAlias=".concat(e),r+="publisherAlias=".concat(e,"&")):null!==t?(c+="h=".concat(t),r+="h=".concat(t,"&")):p=!0,void 0!==s&&(c+="&cpid=".concat(s)),c+="&u=".concat(i),r+="r=".concat(encodeURIComponent(c))}return r+="&u=".concat(i)}function a(e,t,n){f.LIB.http.request("GET",{url:e,responseType:"json",withCredentials:!0},t,n)}function m(e,t,n){if("object"!==r(e)){f.LIB.logger.error("Response from constrain has been modified and is no longer an object");try{"string"==typeof e&&""!==e&&(e=JSON.parse(e))}catch(e){f.LIB.logger.error("Could not parse the response from the constrain API")}}f.LIB.CONSTRAIN_ADAPTER.rawResponse=e;var o=f.LIB.CONSTRAIN_ADAPTER.formatConstrainResponse(f.LIB.CONSTRAIN_ADAPTER.rawResponse);f.LIB.CONSTRAIN_ADAPTER.applyConstrainResponse(t,o),n(o)}}},{}],22:[function(e,t,n){"use strict";n.forLIB=function(u){try{var l=u._bootOptions;l.useConstrainVendorAlias&&(l["#ucb1"]={UCB:u.LODASH.get(window,"_CTZG.bootloader.icc.UCB",{})},l["#build1"].vendorAlias=u.LODASH.get(window,"_CTZG.bootloader.constrain.data.PublisherMetadataModule.publisherAlias",null)||l["#ucb1"].UCB.alias);var e="https:";if(u.config["#build1"]=l["#build1"],u.config["#cti1"]=u.LODASH.merge(u.config["#cti1"]||{},{debug:l["#build1"].debugEnabled||!1,options:{},logger:{},publisher:{alias:l["#build1"].vendorAlias,hash:l["#build1"].vendorHash},endpoints:{www:{protocol:e,hostUri:"//www.clicktripz.com"},static:{protocol:e,hostUri:"//"+l["#build1"].staticHostname},images:{protocol:e,hostUri:"//"+l["#build1"].imagesHostname},release:{protocol:e,hostUri:"//"+l["#build1"].releaseHostname},beacon:{protocol:"https:",hostUri:"//www.clicktripz.com/logs"}},localization:u.UA.getLanguage()}),!l["#constrain1"]&&l["#spec1"]&&l["#spec1"].FPCS){var t=l["#spec1"].FPCS;Array.isArray(t)||(t=[t]);var n=t.filter(function(e){if(!e.hostname)return!1;var t=u.dom.window.location.hostname.indexOf(e.hostname);return-1!==t&&t===u.dom.window.location.hostname.length-e.hostname.length});if(0===n.length&&(n=t.filter(function(e){return!e.hostname})),1<n.length)throw console.error("found",n),new Error("More than one FPCS config object matches for hostname '"+u.dom.window.location.hostname+"'!");1===n.length&&((t=n[0]).hostnames.beacon=t.hostnames.www,Object.keys(t.hostnames).forEach(function(e){t.hostnames[e];u.config["#cti1"].endpoints[e]={protocol:!1===t.secure?"http:":"https:",hostUri:"//"+t.hostnames[e]}}))}if(l["#constrain1"]){if(l["#spec1"]&&0<Object.keys(l["#spec1"]).length)throw new Error("Cannot specify '#spec1' if '#constrain1' is specified!");l["#constrain1"].specs&&l["#constrain1"].specs.length&&l["#constrain1"].specs.forEach(function(e,n){l["#constrain1"].specs[n].fpcs&&l["#constrain1"].specs[n].fpcs.length&&l["#constrain1"].specs[n].fpcs.forEach(function(e,t){l["#constrain1"].specs[n].fpcs[t].hostname;Object.keys(l["#constrain1"].specs[n].fpcs[t].hostnames).forEach(function(e){u.config["#cti1"].endpoints[e]={protocol:!1===l["#constrain1"].specs[n].fpcs[t].secure?"http:":"https:",hostUri:"//"+l["#constrain1"].specs[n].fpcs[t].hostnames[e]}})})})}u.dom.window.CTI_DEBUG_ON_IWS?(u.config["#cti1"].endpoints.release.hostUri="//"+("https:"===u.dom.window.location.protocol?l["#build1"].iwsHostname+":8089":l["#build1"].iwsHostname+":8088"),u.config["#cti1"].endpoints.beacon.protocol="https:",u.config["#cti1"].endpoints.beacon.hostUri="//www.clicktripz.com/logs"):"//www.clicktripz.com"!==u.config["#cti1"].endpoints.www.hostUri&&(u.config["#cti1"].endpoints.beacon.hostUri=u.config["#cti1"].endpoints.www.hostUri+"/logs"),Object.keys(u.config["#cti1"].endpoints).forEach(function(e){if(!/^\/\//.test(u.config["#cti1"].endpoints[e].hostUri))throw new Error("[constrain-adapter] The 'hostUri' for endpoint '"+e+"' may not include the protocol and must start with '//'!");if(!/^https?:$/.test(u.config["#cti1"].endpoints[e].protocol))throw new Error("[constrain-adapter] The 'protocol' for endpoint '"+e+"' must be set to 'http:' or 'https:'!")})}catch(e){throw e}var o={applyConstrainResponse:function(e,t){var n=t.data;if(e.config["#cti1"].userOptedOut=n.userOptedOut,u.LODASH.get(l,"nonTravel.enableConstrainNonTravel",!1)){e.config["#cti1"].publisher||(e.config["#cti1"].publisher={}),e.config["#cti1"].publisher.umbrellaID=n.umbrellaID;var o=u.LODASH.get(n,"products.exit_unit.publisherID",null),r=u.LODASH.get(n,"products.lightbox.publisherID",null);o&&(e.config["#cti1"].publisher.id=o),r&&(e["ddu-config"]["#cti1"].publisher||(e["ddu-config"]["#cti1"].publisher={}),e["ddu-config"]["#cti1"].publisher.id=r),n.audiences&&(e.config["#cti1"].nonTravel={audiences:u.LODASH.get(n,"audiences",null),products:u.LODASH.get(n,"products",null)})}var i=u.COOKIE.get("_ctpuid"),c=u.COOKIE.get("_pageviewUUID"),s=u.LODASH.get(n,"PageViewTrackerModule.pageViewUuid",c);n.dmn&&n.cpid&&n.cpid!==i&&(void 0!==i&&u.COOKIE.remove("_ctpuid"),u.COOKIE.set("_ctpuid",n.cpid,{expires:1/0,domain:n.dmn})),c!==s&&(c&&u.COOKIE.remove("_pageviewUUID"),u.COOKIE.set("_pageviewUUID",s,{expires:600,domain:n.dmn?n.dmn:window.location.host}));var a=u.LODASH.get(n,["PublisherMetadataModule","publisherAlias"],null)||u.LODASH.get(n,["PublisherMetadataModule","siteName"],null);a&&(e.config["#cti1"].publisher=u.LODASH.merge({},e.config["#cti1"].publisher,u.LODASH.get(n,["PublisherMetadataModule"]),{alias:a}))}};return o}},{}],23:[function(e,t,n){"use strict";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.forLib=function(e){var r=e.console,o=function(e){if("object"!==c(e.document))throw new Error("Cookies.js requires a `window` with a `document` object");function i(e,t,n){return 1===arguments.length?i.get(e):i.set(e,t,n)}return i._document=e.document,i._cacheKeyPrefix="cookey.",i._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),i.defaults={path:"/",secure:!1},i.get=function(e){i._cachedDocumentCookie!==i._document.cookie&&i._renewCache();var t=i._cache[i._cacheKeyPrefix+e];return void 0===t?void 0:decodeURIComponent(t)},i.set=function(e,t,n){return(n=i._getExtendedOptions(n)).expires=i._getExpiresDate(void 0===t?-1:n.expires),i._document.cookie=i._generateCookieString(e,t,n),i},i.expire=function(e,t){return i.set(e,void 0,t)},i._getExtendedOptions=function(e){return{path:e&&e.path||i.defaults.path,domain:e&&e.domain||i.defaults.domain,expires:e&&e.expires||i.defaults.expires,secure:e&&void 0!==e.secure?e.secure:i.defaults.secure}},i._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},i._getExpiresDate=function(e,t){if(t=t||new Date,"number"==typeof e?e=e===1/0?i._maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!i._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},i._generateCookieString=function(e,t,n){var o=(e=(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return o+=(n=n||{}).path?";path="+n.path:"",o+=n.domain?";domain="+n.domain:"",o+=n.expires?";expires="+n.expires.toUTCString():"",o+=n.secure?";secure":""},i._getCacheFromString=function(e){for(var t={},n=e?e.split("; "):[],o=0;o<n.length;o++){var r=i._getKeyValuePairFromCookieString(n[o]);void 0===t[i._cacheKeyPrefix+r.key]&&(t[i._cacheKeyPrefix+r.key]=r.value)}return t},i._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var n,o=e.substr(0,t);try{n=decodeURIComponent(o)}catch(e){r&&"function"==typeof r.error&&r.error('Could not decode cookie with key "'+o+'"',e)}return{key:n,value:e.substr(t+1)}},i._renewCache=function(){i._cache=i._getCacheFromString(i._document.cookie),i._cachedDocumentCookie=i._document.cookie},i._areEnabled=function(){var e="cookies.js",t="1"===i.set(e,1).get(e);return i.expire(e),t},i.enabled=i._areEnabled(),i}(e.dom.window),t={set:function(e,t,n){return o.set(e,t,n)},get:function(e){return o.get(e)},getAll:function(){for(var e=document.cookie.split(";"),t={},n=0;n<e.length;n++){var o=e[n].split("=");2===o.length&&(t[o[0].replace(/(^\s+|\s+)/g,"")]=unescape(o[1].replace(/(^\s+|\s+)/g,"")))}return t},remove:function(e){return o.expire(e)}};return t}},{}]},{},[19]);